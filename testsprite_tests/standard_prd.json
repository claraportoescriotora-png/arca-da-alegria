{
  "meta": {
    "project": "Amiguitos: Jornada em Família",
    "date": "2026-02-20",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "A family-focused PWA that offers curated Christian stories, videos, games and mission activities for children (ages 3–7) with a safe media hub and AI-generated bedtime narratives. (See vision document PDF, pages 1-2, for purpose, features and monetization flow.)",
  "core_goals": [
    "Provide a safe, ad-free media experience for young children with curated videos and stories.",
    "Encourage healthy family habits through guided daily missions and printable activities.",
    "Deliver interactive educational games and AI-personalized bedtime narratives to increase engagement.",
    "Support a subscription/paywall model for premium content while offering an introductory free period.",
    "Enable administrative content management for stories, videos, games, missions and downloads."
  ],
  "features": [
    {
      "name": "User Authentication",
      "description": "Authenticate families with email/password using Supabase Auth and protect routes behind an authenticated session.",
      "user_flows": [
        "Navigate to / -> Fill email input field -> Fill password input field -> Click login button -> Redirect to /home on success -> See dashboard on /home",
        "Navigate to / -> Fill email input field -> Fill password input field with invalid credentials -> Click login button -> See error message on invalid credentials -> Remain on /"
      ]
    },
    {
      "name": "Landing Page (Marketing & CTA)",
      "description": "Public landing/sales page with hero, product info, carousels and CTAs that guide users to trial or purchase.",
      "user_flows": [
        "Navigate to /landing -> View hero section with product info -> Click CTA buttons to scroll to offer section -> Browse games carousel with navigation arrows -> Click final purchase button to go to Kiwify payment page",
        "Navigate to /landing -> Click CTA button to access gated content -> If not authenticated, Click CTA -> Redirect to / -> See login page"
      ]
    },
    {
      "name": "Paywall & Subscription",
      "description": "Monetization flow that unlocks the full journey after an initial free period; non-subscribers are routed to /paywall for purchase.",
      "user_flows": [
        "Navigate to /paywall -> View subscription options -> Click subscribe -> Complete purchase -> Redirect to /home with premium access",
        "Navigate to /paywall -> Click subscribe -> External payment fails -> See payment error message and retry option"
      ]
    },
    {
      "name": "Bible Stories (Library)",
      "description": "Browse and read 70+ illustrated bible stories with detail pages and reading UI.",
      "user_flows": [
        "Navigate to /stories -> Browse story cards -> Click on a story to view details -> See story content on /story/:id -> Navigate back to /stories",
        "Navigate to /stories while not authenticated -> Redirect to / -> See login page"
      ]
    },
    {
      "name": "Curated Videos (Secure Media Hub)",
      "description": "Curated set of Christian videos filtered and presented in a custom player without invasive ads or inappropriate suggestions.",
      "user_flows": [
        "Navigate to /videos -> Browse video cards by category -> Click to watch a video -> See video player load and play the selected video",
        "Navigate to /videos -> Click to watch a video -> Video fails to load due to network error -> See video load error and retry control"
      ]
    },
    {
      "name": "Educational Games",
      "description": "Seven native mini-games with biblical themes (puzzle, shepherd, sky-jump, signs memory, find-jesus, rhythm, charades) optimized for mobile performance.",
      "user_flows": [
        "Navigate to /games -> Browse available games -> Select and play a game -> Load game at /games/puzzle/:id (or other game route) -> Interact with game controls -> View score or completion screen",
        "Navigate to /games -> Select a game -> Attempt to play while offline -> See offline notice and retry option"
      ]
    },
    {
      "name": "Daily Missions (Family Tasks)",
      "description": "Daily spiritual missions that families can browse, mark steps complete, and track progress.",
      "user_flows": [
        "Navigate to /missions -> Browse available missions -> Select a mission to view details -> Mark mission steps as completed -> See mission progress update",
        "Navigate to /missions -> Select a mission -> Attempt to mark step completed while offline -> See sync error and queued update for later"
      ]
    },
    {
      "name": "Activities & Downloads (Printable Resources)",
      "description": "Printable coloring pages and activity PDFs available for download and local storage for offline use.",
      "user_flows": [
        "Navigate to /activities -> Browse activity cards -> Click activity download -> Start PDF download -> Confirm file saved to device",
        "Navigate to /activities -> Click activity download -> Download fails due to network or storage error -> See download error and retry option"
      ]
    },
    {
      "name": "Devotional (Daily Prayer & Verses)",
      "description": "Daily devotionals presenting a prayer, verse of the day and navigable devotional sections.",
      "user_flows": [
        "Navigate to /devotional -> View daily prayer -> Read verse of the day -> Navigate between devotional sections",
        "Navigate to /devotional while not authenticated -> Redirect to / -> See login page"
      ]
    },
    {
      "name": "Narrativas Inteligentes (Storyteller AI)",
      "description": "AI-generated, personalized bedtime stories (Google Gemini integration described in vision doc) that parents can generate and read aloud for children.",
      "user_flows": [
        "Navigate to /stories -> Click Create Personalized Story -> Fill child name and preferences -> Click Generate -> See generated story on /story/:id -> Optionally Save to Favorites",
        "Navigate to /stories -> Click Create Personalized Story -> Fill form -> Click Generate -> AI service fails or returns error -> See generation error and try-again option"
      ]
    },
    {
      "name": "Admin Panel (Content Management)",
      "description": "Admin area for creating, editing, deleting and toggling visibility of stories, videos, games, missions and downloads.",
      "user_flows": [
        "Navigate to /admin -> Authenticate as admin -> Navigate admin sidebar -> Create new content item -> See new item listed in admin content list",
        "Navigate to /admin as non-admin user -> See access denied or redirect to /home"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Vite",
      "Tailwind CSS",
      "Supabase (Auth + Database + Storage)",
      "React Router v6",
      "Radix UI",
      "Lucide React Icons",
      "TanStack React Query"
    ],
    "routes": [
      {
        "path": "/",
        "file": "src/pages/Login.tsx",
        "auth_required": false,
        "description": "User login page with Supabase Auth"
      },
      {
        "path": "/landing",
        "file": "src/pages/Landing.tsx",
        "auth_required": false,
        "description": "Public landing/sales page with product info and CTA buttons"
      },
      {
        "path": "/paywall",
        "file": "src/pages/Paywall.tsx",
        "auth_required": true,
        "description": "Subscription paywall for non-subscribers"
      },
      {
        "path": "/home",
        "file": "src/pages/Home.tsx",
        "auth_required": true,
        "description": "Main home dashboard showing all content categories"
      },
      {
        "path": "/stories",
        "file": "src/pages/Stories.tsx",
        "auth_required": true,
        "description": "Bible stories listing page"
      },
      {
        "path": "/story/:id",
        "file": "src/pages/StoryDetail.tsx",
        "auth_required": true,
        "description": "Individual bible story detail page"
      },
      {
        "path": "/videos",
        "file": "src/pages/Videos.tsx",
        "auth_required": true,
        "description": "Curated Christian videos listing page"
      },
      {
        "path": "/games",
        "file": "src/pages/Games.tsx",
        "auth_required": true,
        "description": "Educational games listing page"
      },
      {
        "path": "/games/puzzle/:id",
        "file": "src/pages/games/PuzzleGame.tsx",
        "auth_required": true,
        "description": "Biblical puzzle game"
      },
      {
        "path": "/games/shepherd/:id",
        "file": "src/pages/games/ShepherdGame.tsx",
        "auth_required": true,
        "description": "Good Shepherd sheep guiding game"
      },
      {
        "path": "/games/sky-jump/:id",
        "file": "src/pages/games/SkyJumpGame.tsx",
        "auth_required": true,
        "description": "Sky jump obstacle game"
      },
      {
        "path": "/games/signs/:id",
        "file": "src/pages/games/SignsGame.tsx",
        "auth_required": true,
        "description": "Signs of Jesus memory game"
      },
      {
        "path": "/games/find-jesus/:id",
        "file": "src/pages/games/FindJesusGame.tsx",
        "auth_required": true,
        "description": "Find Jesus maze game"
      },
      {
        "path": "/games/rhythm/:id",
        "file": "src/pages/games/RhythmGame.tsx",
        "auth_required": true,
        "description": "Rhythm and music game"
      },
      {
        "path": "/games/charades/:id",
        "file": "src/pages/games/CharadesGame.tsx",
        "auth_required": true,
        "description": "Charades family game"
      },
      {
        "path": "/activities",
        "file": "src/pages/Activities.tsx",
        "auth_required": true,
        "description": "Coloring and printable activities page"
      },
      {
        "path": "/missions",
        "file": "src/pages/Missions.tsx",
        "auth_required": true,
        "description": "Daily spiritual missions listing"
      },
      {
        "path": "/missions/:id",
        "file": "src/pages/MissionDetail.tsx",
        "auth_required": true,
        "description": "Individual mission detail and progress"
      },
      {
        "path": "/devotional",
        "file": "src/pages/Devotional.tsx",
        "auth_required": true,
        "description": "Daily devotional with prayers and verses"
      },
      {
        "path": "/profile",
        "file": "src/pages/Profile.tsx",
        "auth_required": true,
        "description": "User profile settings"
      },
      {
        "path": "/favorites",
        "file": "src/pages/Favorites.tsx",
        "auth_required": true,
        "description": "User favorite content list"
      },
      {
        "path": "/notifications",
        "file": "src/pages/Notifications.tsx",
        "auth_required": true,
        "description": "User notifications page"
      },
      {
        "path": "/privacy",
        "file": "src/pages/Privacy.tsx",
        "auth_required": true,
        "description": "Privacy policy page"
      },
      {
        "path": "/help",
        "file": "src/pages/Help.tsx",
        "auth_required": true,
        "description": "Help and support page"
      },
      {
        "path": "/admin/*",
        "file": "src/pages/admin/Admin.tsx",
        "auth_required": true,
        "description": "Admin dashboard with content management"
      }
    ],
    "features": [
      {
        "name": "User Authentication",
        "description": "Login with email/password via Supabase Auth",
        "files": [
          "src/pages/Login.tsx",
          "src/components/ProtectedRoute.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Fill email input field",
          "Fill password input field",
          "Click login button",
          "See error message on invalid credentials",
          "Redirect to /home on success"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "supabase.auth.signInWithPassword"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Landing Page",
        "description": "Public sales page with product info, carousels, and CTA buttons that scroll to offer",
        "files": [
          "src/pages/Landing.tsx"
        ],
        "entry_route": "/landing",
        "user_interactions": [
          "View hero section with product info",
          "Click CTA buttons to scroll to offer section",
          "Browse games carousel with navigation arrows",
          "Browse videos carousel with navigation arrows",
          "Click final purchase button to go to Kiwify payment page"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Bible Stories",
        "description": "Browse and read 70+ illustrated bible stories for children",
        "files": [
          "src/pages/Stories.tsx",
          "src/pages/StoryDetail.tsx"
        ],
        "entry_route": "/stories",
        "user_interactions": [
          "Browse story cards",
          "Click on a story to view details",
          "Read story content",
          "Navigate back to stories list"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('stories').select()"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Curated Videos",
        "description": "Browse 215+ curated Christian videos for children",
        "files": [
          "src/pages/Videos.tsx"
        ],
        "entry_route": "/videos",
        "user_interactions": [
          "Browse video cards by category",
          "Click to watch a video",
          "Filter or search videos"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('videos').select()"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Educational Games",
        "description": "7 different educational games with biblical themes",
        "files": [
          "src/pages/Games.tsx",
          "src/pages/games/PuzzleGame.tsx",
          "src/pages/games/ShepherdGame.tsx",
          "src/pages/games/SkyJumpGame.tsx",
          "src/pages/games/SignsGame.tsx",
          "src/pages/games/FindJesusGame.tsx",
          "src/pages/games/RhythmGame.tsx",
          "src/pages/games/CharadesGame.tsx"
        ],
        "entry_route": "/games",
        "user_interactions": [
          "Browse available games",
          "Select and play a game",
          "Interact with game controls",
          "View score or completion"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('games').select()"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Daily Missions",
        "description": "Spiritual missions for family prayer and action",
        "files": [
          "src/pages/Missions.tsx",
          "src/pages/MissionDetail.tsx"
        ],
        "entry_route": "/missions",
        "user_interactions": [
          "Browse available missions",
          "Select a mission to view details",
          "Mark mission steps as completed",
          "Track mission progress"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('missions').select()"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Activities",
        "description": "Printable coloring activities for children",
        "files": [
          "src/pages/Activities.tsx",
          "src/components/ActivityCard.tsx"
        ],
        "entry_route": "/activities",
        "user_interactions": [
          "Browse activity cards",
          "Download or view activity PDFs"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('activities').select()"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Devotional",
        "description": "Daily devotional with guided prayers and bible verses",
        "files": [
          "src/pages/Devotional.tsx"
        ],
        "entry_route": "/devotional",
        "user_interactions": [
          "View daily prayer",
          "Read verse of the day",
          "Navigate between devotional sections"
        ],
        "api_calls": [
          {
            "method": "GET",
            "endpoint": "supabase.from('devotionals').select()"
          }
        ],
        "auth_required": true
      },
      {
        "name": "Admin Panel",
        "description": "Content management for stories, videos, games, missions, and downloads",
        "files": [
          "src/pages/admin/Admin.tsx",
          "src/pages/admin/AdminStories.tsx",
          "src/pages/admin/AdminVideos.tsx",
          "src/pages/admin/AdminGames.tsx",
          "src/pages/admin/AdminMissions.tsx",
          "src/pages/admin/AdminDownloads.tsx",
          "src/pages/admin/AdminAgent.tsx"
        ],
        "entry_route": "/admin",
        "user_interactions": [
          "Navigate admin sidebar",
          "Create new content items",
          "Edit existing content",
          "Delete content items",
          "Toggle content visibility"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "supabase.from('stories').insert()"
          },
          {
            "method": "PATCH",
            "endpoint": "supabase.from('stories').update()"
          },
          {
            "method": "DELETE",
            "endpoint": "supabase.from('stories').delete()"
          }
        ],
        "auth_required": true
      }
    ],
    "known_limitations": [
      {
        "issue": "App requires Supabase backend connection for authentication and data",
        "location": "src/lib/supabase.ts",
        "impact": "All protected routes need valid Supabase credentials and active connection"
      },
      {
        "issue": "Subscription check guards most routes",
        "location": "src/components/SubscriptionGuard.tsx",
        "impact": "Non-subscribed users are redirected to /paywall even if authenticated"
      }
    ]
  }
}
